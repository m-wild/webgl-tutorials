<!DOCTYPE html>
<html>
    <head>
        <style type="text/css">
            html {
                font-family: Consolas, monospace;
            }
            input {
                width: 380px;
            }
            canvas {
                border: 1px solid #000;
            }
        </style>
    </head>
    <body>
        <canvas id="gl-canvas" width="400" height="400"></canvas>

        <p>x:<input id="gl-x" type="range" min="0" max="400" onchange="update();"/></p>
        <p>y:<input id="gl-y" type="range" min="0" max="400" onchange="update();"/></p>
        <p>r:<input id="gl-r" type="range" min="0" max="360" onchange="update();"/></p>
        <p>sx:<input id="gl-sx" type="range" min="-5" max="5" onchange="update();"/></p>
        <p>sy:<input id="gl-sy" type="range" min="-5" max="5" onchange="update();"/></p>


        <script id="gl-vertexShader" type="glsl">
            attribute vec2 a_position;

            uniform vec2 u_resolution;
            uniform vec2 u_translation;
            uniform vec2 u_rotation;
            uniform vec2 u_scale;

            void main() {
                
                vec2 scaled = a_position * u_scale;

                vec2 rotated = vec2(
                    scaled.x * u_rotation.y + scaled.y * u_rotation.x,
                    scaled.y * u_rotation.y - scaled.x * u_rotation.x);

                vec2 translated = rotated + u_translation;
                    
                // convert the position from pixels 
                vec2 clipspace = (((
                    translated / u_resolution)  // to 0->1
                    * 2.0)                      // then to 0->2
                    - 1.0)                      // then to -1->+1 (clipspace)
                    * vec2(1, -1);              // then flip y-axis
                
                gl_Position = vec4(clipspace, 0, 1);
            }       
        </script>
        
        <script id="gl-fragmentShader" type="glsl">
            precision mediump float;
            uniform vec4 u_color;

            void main() {
                gl_FragColor = u_color;
            }
        </script>

        <script src="../js/index.js" type="text/javascript"></script>
    </body>
</html>